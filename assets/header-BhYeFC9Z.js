(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const K="/quiz-generator/",A=1,M="quizzesDB",f="quizzes",x="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let C=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)e+=x[n[t]&63];return e};const y=(t,e)=>e.some(n=>t instanceof n);let B,E;function O(){return B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N(){return E||(E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const b=new WeakMap,h=new WeakMap,l=new WeakMap;function T(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",s),t.removeEventListener("error",i)},s=()=>{n(d(t.result)),o()},i=()=>{r(t.error),o()};t.addEventListener("success",s),t.addEventListener("error",i)});return l.set(e,t),e}function V(t){if(b.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",i),t.removeEventListener("abort",i)},s=()=>{n(),o()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",s),t.addEventListener("error",i),t.addEventListener("abort",i)});b.set(t,e)}let w={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return b.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function S(t){w=t(w)}function j(t){return N().includes(t)?function(...e){return t.apply(g(this),e),d(this.request)}:function(...e){return d(t.apply(g(this),e))}}function z(t){return typeof t=="function"?j(t):(t instanceof IDBTransaction&&V(t),y(t,O())?new Proxy(t,w):t)}function d(t){if(t instanceof IDBRequest)return T(t);if(h.has(t))return h.get(t);const e=z(t);return e!==t&&(h.set(t,e),l.set(e,t)),e}const g=t=>l.get(t);function F(t,e,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){const i=indexedDB.open(t,e),a=d(i);return r&&i.addEventListener("upgradeneeded",c=>{r(d(i.result),c.oldVersion,c.newVersion,d(i.transaction),c)}),n&&i.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),o&&c.addEventListener("versionchange",u=>o(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Q=["get","getKey","getAll","getAllKeys","count"],R=["put","add","delete","clear"],m=new Map;function L(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(m.get(e))return m.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=R.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Q.includes(n)))return;const s=async function(i,...a){const c=this.transaction(i,o?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),o&&c.done]))[0]};return m.set(e,s),s}S(t=>({...t,get:(e,n,r)=>L(e,n)||t.get(e,n,r),has:(e,n)=>!!L(e,n)||t.has(e,n)}));const W=["continue","continuePrimaryKey","advance"],_={},I=new WeakMap,v=new WeakMap,Z={get(t,e){if(!W.includes(e))return t[e];let n=_[e];return n||(n=_[e]=function(...r){I.set(this,v.get(this)[e](...r))}),n}};async function*q(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,Z);for(v.set(n,e),l.set(n,g(e));e;)yield n,e=await(I.get(n)||e.continue()),I.delete(n)}function P(t,e){return e===Symbol.asyncIterator&&y(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&y(t,[IDBIndex,IDBObjectStore])}S(t=>({...t,get(e,n,r){return P(e,n)?q:t.get(e,n,r)},has(e,n){return P(e,n)||t.has(e,n)}}));class D{#e=null;constructor(e){this.#e=e}static async open(e,n,r){if(!("indexedDB"in window))throw new Error("IndexedDB не поддерживается браузером");const o=await F(e,n,{upgrade(s,i,a){r&&r(s,i,a)}});return new D(o)}get(e,n){return this.#t(),this.#e.get(e,n)}getAll(e){return this.#t(),this.#e.getAll(e)}put(e,n,r){this.#t(),n!==void 0?this.#e.put(e,n,r):this.#e.put(e,r)}#t(){if(!this.#e)throw new Error("База данных не инициализирована")}}const p=D.open(M,A,t=>{t.objectStoreNames.contains(f)||t.createObjectStore(f,{keyPath:"id"})});async function U(t){return(await p).put(f,{id:C(),...t})}async function H(t){return(await p).get(f,t)}async function k(){return(await p).getAll(f)}class Y{#e;#t;#n;constructor(e={}){const{containerSelector:n=".header",navSelector:r=".header__nav",menuSelector:o=".header__menu"}=e;if(this.#e=document.querySelector(n),this.#t=document.querySelector(r),this.#n=document.querySelector(o),!this.#e)throw new Error("Header: .header not found");if(!this.#t)throw new Error("Header: .header__nav not found");this.#n&&this.#n.addEventListener("click",()=>{this.#e.classList.toggle("header__menu-open"),this.#t.classList.toggle("header__menu-mobile")}),this.#t.addEventListener("click",s=>{s.target.closest("a")&&(this.#e.classList.remove("header__menu-open"),this.#t.classList.remove("header__menu-mobile"))})}setButtonItems(e){this.#t.replaceChildren(),e.forEach(n=>{const r=document.createElement("a");r.href=n.href,r.textContent=n.text,n.variant?r.className=`button button-${n.variant} header__nav-item`:r.className="header__link",n.ariaLabel&&r.setAttribute("aria-label",n.ariaLabel),n.isActive&&r.classList.add("header__link--active"),this.#t.append(r)})}}export{K as B,Y as H,U as a,H as b,k as g,C as n};
